<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0b0f18">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Ta3s-GMC-2016 โ ุตุนูุฏ ุงูุทุนุณ (MVP+)</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <div id="app">
    <canvas id="scene" aria-label="ุตุนูุฏ ุงูุทุนุณ โ ููุญุฉ ุงูุฑุณู"></canvas>

    <div id="topBar" role="status">
      <div class="hud-item">๐๏ธ <span data-i18n="hud.speed">ุงูุณุฑุนุฉ</span> <strong id="hudSpeed">0</strong> km/h</div>
      <div class="hud-item">โญ <span data-i18n="hud.score">ุงูููุงุท</span> <strong id="hudScore">0</strong></div>
      <div class="hud-item">๐ฅ <span data-i18n="hud.combo">ุงููููุจู</span> <strong id="hudCombo">x1.00</strong> <small id="hudComboTime"></small></div>
      <div class="hud-item">โก <span data-i18n="hud.nitro">ุงูููุชุฑู</span> <strong id="hudNitro">2</strong></div>
      <div class="hud-item">๐ช <span data-i18n="hud.winch">ุงูููุด</span> <strong id="hudWinch">1</strong></div>
      <div class="hud-item">โฑ๏ธ <span data-i18n="hud.time">ุงูููุช</span> <strong id="hudTime">60.0</strong>s</div>
      <div class="hud-item" id="hudPhase">๐ต ุฅุญูุงุก</div>
      <button id="settingsToggle" type="button" aria-haspopup="dialog" aria-controls="settingsPanel">โ๏ธ</button>
      <div class="progress"><div class="fill" id="hudProgress"></div></div>
    </div>

    <div id="toast" role="status" aria-live="polite"></div>
    <div id="banner" role="status" aria-live="assertive"></div>

    <div id="qte" aria-hidden="true">
      <div id="qteTitle">โ๏ธ ุชุบุฑูุฒ! ุจุฏูู K ู L ุจุณุฑุนุฉ</div>
      <div id="qteBar"><div id="qteFill"></div></div>
      <div id="qteKeys">
        <button type="button" data-qte="KeyK">K</button>
        <button type="button" data-qte="KeyL">L</button>
      </div>
    </div>

    <div id="endCard" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="card">
        <h1>๐ ุทุจุฎูุงโฆ ุจุณ ูุณููุง ุงูููุญ ๐ง</h1>
        <p><span data-i18n="end.score">ุงูููุงุท</span>: <strong id="endScore">0</strong></p>
        <p><span data-i18n="end.time">ุงูุฒูู</span>: <strong id="endTime">0.0s</strong></p>
        <p><span data-i18n="end.combo">ุฃุนูู ูููุจู</span>: <strong id="endCombo">x1.00</strong></p>
        <p><span data-i18n="end.pb">ุฃูุถู ูุชูุฌุฉ</span>: <strong id="endPB">--</strong></p>
        <button type="button" id="restartBtn" data-i18n="end.retry">ุฅุนุงุฏุฉ ุงููุนุจ</button>
      </div>
    </div>

    <div id="settingsPanel" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="panel">
        <header>
          <h2 data-i18n="settings.title">ุงูุฅุนุฏุงุฏุงุช</h2>
          <button type="button" id="settingsClose" aria-label="ุฅุบูุงู">โ</button>
        </header>
        <div class="panel-body">
          <label>
            <span data-i18n="settings.volume">ูุณุชูู ุงูุตูุช</span>
            <input type="range" id="settingVolume" min="0" max="1" step="0.05">
          </label>
          <label class="toggle">
            <input type="checkbox" id="settingSfx">
            <span data-i18n="settings.sfx">ุชุดุบูู ุงููุคุซุฑุงุช</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="settingBlood">
            <span data-i18n="settings.blood">ุงูุฏู ุงููุฑุชููู</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="settingContrast">
            <span data-i18n="settings.contrast">ููุท ุงูุชุจุงูู ุงูุนุงูู</span>
          </label>
          <label class="toggle">
            <input type="checkbox" id="settingInvert">
            <span data-i18n="settings.invert">ุนูุณ ุงูุงุชุฌุงู</span>
          </label>
          <label>
            <span data-i18n="settings.buttons">ุญุฌู ุงูุฃุฒุฑุงุฑ</span>
            <input type="range" id="settingButtonScale" min="0.8" max="1.4" step="0.1">
          </label>
          <label>
            <span data-i18n="settings.language">ุงููุบุฉ</span>
            <select id="settingLanguage">
              <option value="ar">ุงูุนุฑุจูุฉ</option>
              <option value="en">English</option>
            </select>
          </label>
          <button type="button" id="settingsFlipDev">โ๏ธ <span data-i18n="settings.flip">ููุจ ุงูุงุชุฌุงู ุณุฑูุนูุง</span></button>
        </div>
      </div>
    </div>

    <div id="controls">
      <button type="button" data-control="hold:left">โ๏ธ</button>
      <button type="button" data-control="hold:right">โถ๏ธ</button>
      <button type="button" class="wide" data-control="press:jump">โฌ๏ธ</button>
      <button type="button" data-control="press:nitro">โก</button>
      <button type="button" data-control="press:winch">๐ช</button>
      <button type="button" data-control="press:choice1">1</button>
      <button type="button" data-control="press:choice2">2</button>
      <button type="button" data-control="press:choice3">3</button>
      <button type="button" class="hidden" data-control="qte:KeyK">K</button>
      <button type="button" class="hidden" data-control="qte:KeyL">L</button>
    </div>

    <div id="debugOverlay" hidden>
      <div id="debugContent"></div>
    </div>
  </div>

  <script type="module" src="./src/main.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js').catch(() => {});
      });
    }
  </script>
</body>
</html>
