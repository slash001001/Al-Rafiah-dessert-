var F=Object.defineProperty;var E=(r,a,e)=>a in r?F(r,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[a]=e;var c=(r,a,e)=>E(r,typeof a!="symbol"?a+"":a,e);import{P as n}from"./phaser.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();class M extends n.Scene{constructor(){super("MenuScene");c(this,"selected","gmc")}create(){var d,h;const e=document.getElementById("error-overlay");e&&(e.innerHTML="",e.style.display="none");const{width:t,height:i}=this.scale;this.cameras.main.setBackgroundColor(724756),this.cameras.main.fadeIn(180,0,0,0),this.add.text(t/2,i/2-140,"Ø§Ù„Ø±Ø§ÙØ¹ÙŠØ©",{fontSize:"52px",fontFamily:"system-ui, sans-serif",color:"#f4c27a"}).setOrigin(.5),this.add.text(t/2,i/2-70,"Ø·Ù„Ø¹Ø© Ø¨Ø± â€“ Ø§Ø¬Ù…Ø¹ Ø§Ù„Ø£ØºØ±Ø§Ø¶ Ù‚Ø¨Ù„ ØªØºÙŠØ¨ Ø§Ù„Ø´Ù…Ø³",{fontSize:"18px",fontFamily:"system-ui, sans-serif",color:"#e0e7ff"}).setOrigin(.5);const s=this.button(t/2-140,i/2+20,"GMC (Ø£Ø³ÙˆØ¯)",()=>this.pick("gmc")),o=this.button(t/2+140,i/2+20,"Prado (Ø¨Ù†ÙŠ)",()=>this.pick("prado")),l=this.button(t/2,i/2+110,"Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø±Ø­Ù„Ø©",()=>this.startRun(),32);this.pick("gmc"),(d=this.input.keyboard)==null||d.on("keydown-ENTER",()=>l.emit("pointerdown")),(h=this.input.keyboard)==null||h.on("keydown-SPACE",()=>l.emit("pointerdown")),s.on("pointerdown",()=>this.pick("gmc")),o.on("pointerdown",()=>this.pick("prado"))}button(e,t,i,s,o=26){const l=this.add.text(e,t,i,{fontSize:`${o}px`,fontFamily:"system-ui, sans-serif",color:"#ffffff",backgroundColor:"#2e86ab",padding:{x:14,y:10}}).setOrigin(.5).setInteractive({useHandCursor:!0});return l.on("pointerdown",s),l.on("pointerover",()=>l.setScale(1.05)),l.on("pointerout",()=>l.setScale(1)),l}pick(e){this.selected=e}startRun(){this.cameras.main.fadeOut(200,0,0,0),this.cameras.main.once(n.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{this.scene.start("RunScene",{vehicle:this.selected})})}}const b=(r,a,e)=>n.Display.Color.Interpolate.ColorWithColor(r,a,100,e*100),O=r=>n.Display.Color.GetColor(r.r,r.g,r.b),u=r=>{r.clear(),r.destroy()},I={ensureAll(r){this.createSky(r),this.createDunes(r),this.createRoad(r),this.createPOIs(r),this.createCars(r),this.createHUD(r),this.createBits(r)},createSky(r){if(r.textures.exists("sky"))return;const a=r.add.graphics(),e=n.Display.Color.ValueToColor(728895),t=n.Display.Color.ValueToColor(2574450),i=n.Display.Color.ValueToColor(15902298),s=256;for(let o=0;o<s;o++){const l=o/s,d=b(e,t,l),h=b(t,i,l),p=o<s*.55?d:h;a.fillStyle(O({r:p.r,g:p.g,b:p.b}),1),a.fillRect(0,o,32,1)}a.generateTexture("sky",32,s),u(a)},createDunes(r){const a=(e,t,i)=>{if(r.textures.exists(e))return;const s=r.add.graphics({fillStyle:{color:t,alpha:1}}),o=512,l=220;s.beginPath(),s.moveTo(0,l);const d=6;for(let h=0;h<=d;h++){const p=h/d*o,y=l-40-Math.sin(h*.9)*i-Math.cos(h*1.6)*i*.5;s.lineTo(p,y)}s.lineTo(o,l),s.lineTo(0,l),s.closePath(),s.fillPath(),s.generateTexture(e,o,l),u(s)};a("dune-3",13012831,12),a("dune-2",14197871,22),a("dune-1",15186041,32)},createRoad(r){if(r.textures.exists("road"))return;const a=r.add.graphics(),e=512,t=160;a.fillStyle(2042167,1),a.fillRect(0,t-110,e,110),a.fillStyle(1120295,1),a.fillRect(0,t-130,e,20),a.fillStyle(16711422,.9);for(let i=12;i<e;i+=44)a.fillRect(i,t-75,24,6);a.generateTexture("road",e,t),u(a)},createPOIs(r){const a=(e,t,i,s)=>{if(r.textures.exists(e))return;const o=r.add.graphics();o.fillStyle(t,1),o.fillRoundedRect(0,0,140,90,12),o.lineStyle(3,i,1),o.strokeRoundedRect(0,0,140,90,12),s(o),o.generateTexture(e,140,90),u(o)};a("poi-gas",1194331,4906624,e=>{e.fillStyle(4906624),e.fillRect(32,26,24,40),e.fillRect(56,26,16,18),e.fillRect(70,26,8,10),e.fillRect(78,30,10,26),e.fillRect(88,52,8,14)}),a("poi-food",7023660,16569165,e=>{e.fillStyle(16569165),e.fillRect(36,24,12,44),e.fillRect(54,24,12,44),e.fillCircle(88,48,16)}),a("poi-shop",2042167,6333946,e=>{e.fillStyle(6333946),e.fillRect(30,30,80,36),e.fillStyle(9684477),e.fillRect(46,40,22,18),e.fillRect(78,40,22,18)})},createCars(r){const a=(e,t,i)=>{if(r.textures.exists(e))return;const s=r.add.graphics(),o=110,l=58;s.fillStyle(0,.35),s.fillEllipse(o/2,l-6,84,16),s.fillStyle(t,1),s.fillRoundedRect(8,8,94,42,10),s.fillStyle(i,.9),s.fillRoundedRect(18,14,74,18,8),s.fillStyle(988970,1),s.fillRect(16,l-14,18,8),s.fillRect(o-34,l-14,18,8),s.fillStyle(16317180),s.fillRect(30,18,20,12),s.fillRect(60,18,20,12),s.generateTexture(e,o,l),u(s)};a("car-gmc",988970,2042167),a("car-prado",9133620,11038526)},createHUD(r){if(!r.textures.exists("hud-panel")){const e=r.add.graphics();e.fillStyle(988970,.72),e.fillRoundedRect(0,0,260,120,12),e.lineStyle(2,16569165,.9),e.strokeRoundedRect(0,0,260,120,12),e.generateTexture("hud-panel",260,120),u(e)}const a=(e,t,i)=>{if(r.textures.exists(e))return;const s=r.add.graphics();s.fillStyle(t,1),i==="circle"?s.fillCircle(10,10,8):s.fillRoundedRect(2,2,16,16,4),s.generateTexture(e,20,20),u(s)};if(a("icon-salt",16317180,"square"),a("icon-water",6333946,"circle"),a("icon-charcoal",1120295,"square"),a("icon-lighter",16347926,"circle"),a("icon-hummus",16569165,"circle"),!r.textures.exists("minimap")){const e=r.add.graphics();e.fillStyle(988970,.75),e.fillRoundedRect(0,0,220,120,10),e.lineStyle(2,3718648,.8),e.strokeRoundedRect(0,0,220,120,10),e.generateTexture("minimap",220,120),u(e)}},createBits(r){if(!r.textures.exists("rock")){const a=r.add.graphics();a.fillStyle(9200185),a.fillCircle(14,14,14),a.fillStyle(6044449),a.fillCircle(12,10,10),a.generateTexture("rock",28,28),u(a)}if(!r.textures.exists("puff")){const a=r.add.graphics();a.fillStyle(16571301,.8),a.fillCircle(10,10,10),a.generateTexture("puff",20,20),u(a)}if(!r.textures.exists("finish")){const a=r.add.graphics();a.fillStyle(4906624),a.fillRoundedRect(0,0,160,48,10),a.lineStyle(3,16777215),a.strokeRoundedRect(0,0,160,48,10),a.generateTexture("finish",160,48),u(a)}}},P=["salt","water","charcoal","lighter","hummus"],C={gmc:{accel:420,drag:220,max:320,fuelUse:.25},prado:{accel:520,drag:180,max:360,fuelUse:.2}};class B extends n.Scene{constructor(){super("RunScene");c(this,"vehicle","gmc");c(this,"player");c(this,"cursors");c(this,"keys");c(this,"worldWidth",4800);c(this,"worldHeight",1400);c(this,"sky");c(this,"duneLayers",[]);c(this,"road");c(this,"hudSpeed");c(this,"hudFuel");c(this,"hudTime");c(this,"hudItems");c(this,"minimapDot");c(this,"fuel",110);c(this,"speed",0);c(this,"angle",-.1);c(this,"sunset",210);c(this,"elapsed",0);c(this,"inventory",new Set);c(this,"isFinished",!1);c(this,"finishZone");c(this,"activeEffects",new Set);c(this,"log",[])}init(e){this.vehicle=(e==null?void 0:e.vehicle)||"gmc"}preload(){I.ensureAll(this)}create(){const{width:e,height:t}=this.scale;this.cameras.main.setBackgroundColor("#0b0f14"),this.cameras.main.fadeIn(200,0,0,0),this.sky=this.add.image(e/2,t/2,"sky").setScrollFactor(0),this.sky.setDisplaySize(e,t),this.createDuneLayers(e,t),this.createRoadLayer(),this.physics.world.setBounds(0,0,this.worldWidth,this.worldHeight);const i=C[this.vehicle],o=this.worldHeight-140-50;this.player=this.physics.add.image(180,o,`car-${this.vehicle}`),this.player.setDamping(!0).setDrag(i.drag).setMaxVelocity(i.max).setAngularDrag(600),this.player.setSize(52,28),this.player.setCollideWorldBounds(!0),this.createStops(),this.createDunes(),this.createFinish(),this.createHUD(),this.createTrailTimer();const l=this.input.keyboard;this.cursors=l.createCursorKeys(),this.keys=l.addKeys({W:n.Input.Keyboard.KeyCodes.W,A:n.Input.Keyboard.KeyCodes.A,S:n.Input.Keyboard.KeyCodes.S,D:n.Input.Keyboard.KeyCodes.D,SHIFT:n.Input.Keyboard.KeyCodes.SHIFT,H:n.Input.Keyboard.KeyCodes.H}),this.cameras.main.startFollow(this.player,!0,.12,.12),this.cameras.main.setDeadzone(240,160),this.cameras.main.setBounds(0,0,this.worldWidth,this.worldHeight),this.scheduleChaos(),this.time.addEvent({delay:1e3,loop:!0,callback:()=>{this.isFinished||(this.sunset-=1,this.sunset<=0&&this.finishRun(!1,"ØºØ§Ø¨Øª Ø§Ù„Ø´Ù…Ø³ Ù‚Ø¨Ù„ Ø§Ù„Ù‚Ø¹Ø¯Ø©"))}})}createDuneLayers(e,t){const i=this.add.tileSprite(e/2,t/2+60,e,t,"dune-3").setScrollFactor(0),s=this.add.tileSprite(e/2,t/2+30,e,t,"dune-2").setScrollFactor(0),o=this.add.tileSprite(e/2,t/2,e,t,"dune-1").setScrollFactor(0);i.setTileScale(1.8,2.4),s.setTileScale(1.6,2.2),o.setTileScale(1.4,2),i.setTint(13935475),s.setTint(14789753),o.setTint(15911066),this.duneLayers=[{sprite:i,speed:.05},{sprite:s,speed:.12},{sprite:o,speed:.18}]}createRoadLayer(){const e=this.worldHeight-140;this.road=this.add.tileSprite(this.worldWidth/2,e,this.worldWidth,160,"road").setOrigin(.5,1),this.road.setDepth(1)}createHUD(){const e=this.add.image(18,18,"hud-panel").setOrigin(0).setScrollFactor(0);this.hudSpeed=this.add.text(32,32,"Ø§Ù„Ø³Ø±Ø¹Ø©: 0",this.hudStyle()).setScrollFactor(0),this.hudFuel=this.add.text(32,58,"Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†: 100",this.hudStyle()).setScrollFactor(0),this.hudTime=this.add.text(32,84,"Ø§Ù„ØºØ±ÙˆØ¨: 0:00",this.hudStyle()).setScrollFactor(0),this.hudItems=this.add.text(32,110,"Ø§Ù„Ø£ØºØ±Ø§Ø¶: -",this.hudStyle()).setScrollFactor(0),this.children.bringToTop(e);const t=this.add.image(this.scale.width-238,18,"minimap").setOrigin(0).setScrollFactor(0),i=this.add.graphics().setScrollFactor(0).setDepth(5),s=12;i.lineStyle(3,3718648,.8),i.beginPath(),i.moveTo(t.x+s,t.y+s+60),i.lineTo(t.x+220-s,t.y+s+60),i.strokePath(),[.12,.3,.45].forEach(l=>{i.fillStyle(16569165,1),i.fillCircle(t.x+s+196*l,t.y+s+60,5)}),this.minimapDot=this.add.ellipse(t.x+s,t.y+s+60,12,12,2278750).setScrollFactor(0).setDepth(6),this.add.text(t.x+110,t.y+18,"Rafiah â€” Dammam dunes",{fontSize:"12px",color:"#bae6fd",fontFamily:"system-ui"}).setOrigin(.5,0).setScrollFactor(0)}hudStyle(){return{fontSize:"18px",fontFamily:"system-ui, sans-serif",color:"#e5e7eb"}}createStops(){const e=this.worldHeight-200;[{x:520,label:"Ù…Ø­Ø·Ø© Ø¨Ù†Ø²ÙŠÙ†",grants:["water"],tex:"poi-gas"},{x:1050,label:"Ù…Ø·Ø¹Ù…",grants:["hummus"],tex:"poi-food"},{x:1580,label:"Ø¨Ù‚Ø§Ù„Ø©",grants:["salt","lighter"],tex:"poi-shop"}].forEach(i=>{const s=this.add.rectangle(i.x,e,140,110,16777215,.01);this.physics.add.existing(s,!0),this.add.image(i.x,e-30,i.tex).setDepth(2).setScale(.9),this.add.text(i.x,e-90,i.label,{fontSize:"18px",color:"#f8fafc",fontFamily:"system-ui"}).setOrigin(.5),this.physics.add.overlap(this.player,s,()=>{i.grants.forEach(o=>this.inventory.add(o)),this.log.push(`Ø£Ø®Ø°Øª ${i.grants.join(", ")}`),this.addFloatingText(s.x,s.y-30,"Ø®Ø°Ù†Ø§ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨")})})}createDunes(){const e=this.physics.add.staticGroup();for(let t=0;t<12;t++){const i=n.Math.Between(1900,this.worldWidth-500),s=n.Math.Between(240,this.worldHeight-240);e.create(i,s,"rock").setScale(1.2).refreshBody()}this.physics.add.collider(this.player,e,()=>{this.speed*=.6,this.cameras.main.shake(120,.002),this.log.push("Ø¯Ø¹Ø³Øª ØµØ®Ø±Ø©")})}createFinish(){const e=this.worldWidth-200,t=320;this.finishZone=this.add.rectangle(e,t,180,240,4906624,.14),this.add.image(e,t-120,"finish").setAngle(-6),this.add.text(e,t+80,"Ù‚Ù…Ø© Ø§Ù„Ø·Ø¹Ø³",{fontSize:"18px",color:"#fef08a",fontFamily:"system-ui"}).setOrigin(.5),this.physics.add.existing(this.finishZone,!0),this.physics.add.overlap(this.player,this.finishZone,()=>this.finishRun(!0,"ÙˆØµÙ„Øª Ù‚Ø¨Ù„ Ø§Ù„ØºØ±ÙˆØ¨"))}createTrailTimer(){this.time.addEvent({delay:70,loop:!0,callback:()=>{if(!this.player||this.isFinished)return;const e=this.add.image(this.player.x-Math.cos(this.angle)*18,this.player.y-Math.sin(this.angle)*18,"puff").setTint(15843965).setAlpha(.7);this.tweens.add({targets:e,alpha:0,scale:1.9,duration:520,onComplete:()=>e.destroy()})}})}scheduleChaos(){const e=["stuck","overheat","flat","rain","heli","camel","dogs"];n.Utils.Array.Shuffle(e);const t=n.Math.Between(3,5);let i=14;for(let s=0;s<t;s++){const o=e[s%e.length],l=n.Math.Between(12,24);i+=l,this.time.addEvent({delay:i*1e3,callback:()=>this.triggerEvent(o)})}}triggerEvent(e){if(!this.isFinished)switch(e){case"stuck":this.applyEffect("stuck",4500,"ØªØºØ±ÙŠØ² Ø®ÙÙŠÙØŒ Ù‡Ø¯ Ø§Ù„Ù„Ø¹Ø¨");break;case"overheat":this.applyEffect("overheat",6e3,"Ø­Ø±Ø§Ø±Ø© â€” Ø§Ù„Ù†ÙŠØªØ±Ùˆ Ù…ÙˆÙ‚Ù");break;case"flat":this.applyEffect("flat",8e3,"Ø¨Ù†Ø´Ø±ØŒ Ø§Ù„Ø³Ø±Ø¹Ø© Ù…Ù‚ÙÙ„Ø©");break;case"rain":this.applyEffect("rain",9e3,"Ù…Ø·Ø± â€” Ø§Ù„Ø¯Ø¹Ø³Ø© ØªØ²Ø­Ù„Ù‚");break;case"heli":this.log.push("Ù‡ÙŠÙ„ÙˆÙƒØ¨ØªØ± ØªØ¯Ø±ÙŠØ¨: Ø§ÙØªØªØ§Ø­ Ù…ÙˆØ³Ù… Ø§Ù„Ø±Ø§ÙØ¹ÙŠØ©"),this.cameras.main.shake(160,.004),this.addFloatingText(this.player.x,this.player.y-60,"Ù‡ÙŠÙ„ÙˆÙƒØ¨ØªØ± Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø¹Ø¯Ù‰");break;case"camel":this.spawnCamel();break;case"dogs":this.spawnDogs();break}}applyEffect(e,t,i){this.activeEffects.add(e),this.log.push(i),this.addFloatingText(this.player.x,this.player.y-60,i),this.time.delayedCall(t,()=>this.activeEffects.delete(e))}spawnCamel(){const e=n.Math.Between(200,this.worldHeight-200),t=this.add.rectangle(-60,e,80,44,13935475).setStrokeStyle(2,9133620);this.physics.add.existing(t,!1),t.body.setVelocityX(180),this.physics.add.overlap(this.player,t,()=>{this.speed*=.5,this.cameras.main.shake(100,.002)})}spawnDogs(){const e=this.worldHeight/2+n.Math.Between(-80,80),t=this.add.rectangle(this.player.x+200,e,50,28,13358561).setStrokeStyle(2,4674921);this.physics.add.existing(t,!1);const i=t.body;i.setVelocityX(-120),this.addFloatingText(t.x,t.y-30,"ÙƒÙ„Ø§Ø¨ Ø´ÙˆØ§Ø±Ø¹ â€” Ø²Ù…Ù‘Ø± Ù„Ù‡Ù…"),this.time.addEvent({delay:200,repeat:10,callback:()=>{this.keys.H.isDown&&(i.setVelocityX(200),i.setVelocityY(n.Math.Between(-60,60)),t.setFillStyle(2278750))}}),this.physics.add.overlap(this.player,t,()=>{this.speed*=.7})}addFloatingText(e,t,i){const s=this.add.text(e,t,i,{fontSize:"16px",color:"#fcd34d",fontFamily:"system-ui"}).setOrigin(.5);this.tweens.add({targets:s,y:t-40,alpha:0,duration:1200,onComplete:()=>s.destroy()})}update(e,t){if(this.isFinished)return;const i=t/1e3;this.handleDrive(i),this.updateHUD(),this.duneLayers.forEach(o=>{o.sprite.tilePositionX+=this.speed*i*o.speed});const s=n.Math.Clamp((this.player.x-1800)/900,0,1);this.road.setAlpha(1-s*.8),this.updateMinimap()}handleDrive(e){var S,x,w,k;const t=C[this.vehicle],i=((S=this.cursors.up)==null?void 0:S.isDown)||this.keys.W.isDown,s=((x=this.cursors.down)==null?void 0:x.isDown)||this.keys.S.isDown,o=((w=this.cursors.left)==null?void 0:w.isDown)||this.keys.A.isDown,l=((k=this.cursors.right)==null?void 0:k.isDown)||this.keys.D.isDown,d=this.keys.SHIFT.isDown&&!this.activeEffects.has("overheat")&&this.fuel>0;let h=i?t.accel:0;s&&(h-=t.accel*.8),this.activeEffects.has("stuck")&&(h*=.45),this.activeEffects.has("rain")&&(h*=.65),d&&(h*=1.25);const p=t.drag+(this.activeEffects.has("flat")?260:0),y=this.activeEffects.has("flat")?t.max*.6:t.max;this.speed+=h*e,this.speed-=this.speed*p*.0018*e,this.speed<0&&(this.speed=0),this.speed>y&&(this.speed=y);let m=0;o&&(m-=1),l&&(m+=1);const g=(.9+this.speed/(y||1))*1.2;this.angle+=m*g*e;const R=Math.cos(this.angle)*this.speed,v=Math.sin(this.angle)*this.speed;this.player.setVelocity(R,v),this.player.setRotation(this.angle+Math.PI/2);const D=t.fuelUse*(i?1.1:.4)+(d?.8:0);this.fuel-=D*e,this.fuel<0&&(this.fuel=0,this.speed*=.96),d&&this.fuel<=5&&this.log.push("Ø§Ù„Ù†ÙŠØªØ±Ùˆ Ø£Ø­Ø±Ù‚ Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†")}updateHUD(){this.elapsed+=this.game.loop.delta/1e3;const e=Math.floor(this.sunset/60),t=Math.max(0,Math.floor(this.sunset%60));this.hudSpeed.setText(`Ø§Ù„Ø³Ø±Ø¹Ø©: ${Math.round(this.speed)}`),this.hudFuel.setText(`Ø§Ù„Ø¨Ù†Ø²ÙŠÙ†: ${this.fuel.toFixed(0)}%`),this.hudTime.setText(`Ø§Ù„ØºØ±ÙˆØ¨: ${e}:${t.toString().padStart(2,"0")}`);const i=P.filter(s=>this.inventory.has(s));this.hudItems.setText(`Ø§Ù„Ø£ØºØ±Ø§Ø¶: ${i.length?i.join(", "):"Ù„Ø³Ù‡ Ù†Ø§Ù‚Øµ"}`)}updateMinimap(){if(!this.minimapDot)return;const e=12,t=n.Math.Clamp(this.player.x/this.worldWidth,0,1),i=this.scale.width-238+e;this.minimapDot.setPosition(i+196*t,18+e+60)}finishRun(e,t){this.isFinished||(this.isFinished=!0,this.cameras.main.fadeOut(250,0,0,0),this.cameras.main.once(n.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{this.scene.start("CampScene",{success:e,items:Array.from(this.inventory),timeSpent:this.elapsed,vehicle:this.vehicle,log:this.log,reason:t})}))}}class H extends n.Scene{constructor(){super("CampScene")}create(a){var y,m,g;const{width:e,height:t}=this.scale;this.cameras.main.setBackgroundColor("#0b0f14"),this.cameras.main.fadeIn(220,0,0,0),this.add.rectangle(e/2,t/2,e*.7,t*.7,1120295,.9).setStrokeStyle(2,16569165).setScrollFactor(0);const s=a.success?"ÙˆØµÙ„Ù†Ø§ Ø§Ù„Ù‚Ø¹Ø¯Ø© ğŸ‘":"ØºØ§Ø¨Øª Ø§Ù„Ø´Ù…Ø³ Ù‚Ø¨Ù„ Ù…Ø§ Ù†ÙˆØµÙ„";this.add.text(e/2,t/2-120,s,{fontSize:"28px",color:a.success?"#86efac":"#fca5a5",fontFamily:"system-ui, sans-serif"}).setOrigin(.5);const o=this.missingItems(a.items),l=[`Ø§Ù„Ø³ÙŠØ§Ø±Ø©: ${a.vehicle==="gmc"?"Ø¬Ù…Ø³ Ø£Ø³ÙˆØ¯":"Ø¨Ø±Ø§Ø¯Ùˆ Ø¨Ù†ÙŠ"}`,`Ø§Ù„ÙˆÙ‚Øª: ${a.timeSpent.toFixed(1)} Ø«Ø§Ù†ÙŠØ©`,`Ø§Ù„Ø£ØºØ±Ø§Ø¶: ${a.items.length?a.items.join(", "):"Ù†Ø³ÙŠÙ†Ø§ ÙƒÙ„ Ø´ÙŠ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§"}`];o.length?l.push(`Ù†Ø³ÙŠÙ†Ø§: ${o.join(", ")}`):l.push("Ù…Ø¹Ø§Ù†Ø§ ÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª (Ù…Ø¹Ø¬Ø²Ø©!)"),n.Math.Between(1,100)<=4&&l.push("Ø¥ÙŠØ³ØªØ± Ø¥ÙŠØ¬: Ø¹Ù„ÙŠ Ù…Ø´Ø§Ø±ÙŠ Ø·Ù‚Ù‡Ø§ Ø¶Ø­Ùƒ ÙˆÙ‚Ø§Ù„ ÙˆÙŠÙ† Ø§Ù„Ø³Ø§Ù„ÙØ©ØŸ");const h=this.cookScore(a.success,o);l.push(h),a.reason&&l.push(`Ù…Ù„Ø§Ø­Ø¸Ø©: ${a.reason}`),(y=a.log)!=null&&y.length&&(l.push(""),l.push("Ø³ÙˆØ§Ù„Ù Ø§Ù„Ø·Ø±ÙŠÙ‚:"),l.push(...a.log.slice(-5))),this.add.text(e/2,t/2-60,l.join(`
`),{fontSize:"16px",color:"#e5e7eb",fontFamily:"system-ui, sans-serif",align:"center",wordWrap:{width:e*.64}}).setOrigin(.5,0),this.add.text(e/2,t-110,"Ø±Ø¬Ø¹Ù†ÙŠ Ù„Ù„Ù…Ù†ÙŠÙˆ",{fontSize:"22px",color:"#0f172a",backgroundColor:"#fcd34d",padding:{x:18,y:12}}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",()=>this.back()),(m=this.input.keyboard)==null||m.once("keydown-SPACE",()=>this.back()),(g=this.input.keyboard)==null||g.once("keydown-ENTER",()=>this.back())}missingItems(a){return["salt","water","charcoal","lighter"].filter(t=>!a.includes(t))}cookScore(a,e){return a&&e.length<=1?"Ø§Ù„Ø·Ø¨Ø®Ø© Ø¶Ø¨Ø·Øª ØµØ¯ÙØ© (ÙˆÙƒÙ„Ù† Ù…Ø¨Ø³ÙˆØ·)":e.includes("salt")?"Ø¨Ø¯ÙˆÙ† Ù…Ù„Ø­ØŸ Ø§Ù„Ø·Ø¨Ø®Ø© ØµØ§Ø±Øª Ø³ÙˆÙŠØª â€” ÙØ¶ÙŠØ­Ø© Ù…ÙˆØ³Ù…ÙŠØ©":e.length>=3?"Ù†Ø³ÙŠÙ†Ø§ ÙƒÙ„ Ø´ÙŠØŒ Ø·Ø¨Ø®Ù†Ø§ Ù‡ÙˆØ§ ÙˆØ¶Ø­ÙƒÙ†Ø§ ÙˆØ®Ù„Øµ":a?"Ø£Ø¯ÙŠÙ†Ø§Ù‡Ø§ Ù†ÙŠØ´Ø§Ù†ØŒ Ù„ÙƒÙ† Ø§Ù„Ø·Ø¹Ù… ÙŠØ¨ØºÙ‰ Ù„Ù‡ Ø´ØºÙ„":"ÙØ´Ù„Ù†Ø§ ÙÙŠ Ø§Ù„ÙˆÙ‚ØªØŒ Ù„ÙƒÙ† Ø§Ù„Ù‚Ø¹Ø¯Ø© Ø­Ù„ÙˆØ©"}back(){this.cameras.main.fadeOut(200,0,0,0),this.cameras.main.once(n.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{this.scene.start("MenuScene")})}}const f=document.getElementById("error-overlay"),T=r=>{f&&(f.style.display="block",f.textContent=r)},L=()=>{f&&(f.style.display="block",f.textContent="Loading Rafiahâ€¦ Ø¥Ø°Ø§ Ø´ÙØª Ø´Ø§Ø´Ø© Ø³ÙˆØ¯Ø§ Ø§Ø±ÙØ¹ Ø§Ù„Ø­Ø§ÙØ¸ Ø§Ù„Ù„Ù‡")};L();window.addEventListener("error",r=>{T(`window.error: ${r.message||r.error}`)});window.addEventListener("unhandledrejection",r=>{T(`promise rejection: ${r.reason}`)});const A={type:n.AUTO,parent:"app",width:960,height:540,backgroundColor:"#0b0f14",scale:{mode:n.Scale.FIT,autoCenter:n.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{gravity:{x:0,y:0},debug:!1}},scene:[M,B,H]},z=new n.Game(A);z.events.on("ready",()=>{f!=null&&f.style&&(f.style.display="none")});
